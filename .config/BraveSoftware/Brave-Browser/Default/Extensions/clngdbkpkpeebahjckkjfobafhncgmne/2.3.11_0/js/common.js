"use strict";{const e=self,t=e,r=e.document;(()=>{var n,s,o,a={9458:()=>{e.browser=chrome},7033:(e,t,r)=>{t.getLZValues=async function(keys=Object.values(LZ_KEY)){const data=await get(keys);for(const key of keys){const value=data[key];data[key]=value&&unLZ(value)}return data},t.setLZValues=function(data){const res={};for(const key in data)res[key]=toLZ(data[key]);return set(res)};for(var streamData,streamDataVal,streamDataPosition,streamBitsPerChar,streamGetCharFromInt,n=0,reverseDict={},fromCharCode=String.fromCharCode,base="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+",Base64CharArray=(base+"/=").split(""),UriSafeCharArray=(base+"-$").split("");n<65;)n>62&&(reverseDict[UriSafeCharArray[n].charCodeAt(0)]=n),reverseDict[Base64CharArray[n].charCodeAt(0)]=n++;function streamBits(value,numBitsMask){for(var e=0;numBitsMask>>=1;e++)streamDataVal=value>>e&1|streamDataVal<<1,++streamDataPosition===streamBitsPerChar&&(streamDataPosition=0,streamData.push(streamGetCharFromInt(streamDataVal)),streamDataVal=0)}function getCharFromUTF16(e){return fromCharCode(e+32)}function s(uncompressed,bitsPerChar,getCharFromInt){if(streamData=[],null!=uncompressed){streamDataVal=0,streamDataPosition=0,streamBitsPerChar=bitsPerChar,streamGetCharFromInt=getCharFromInt;var e=0,t=0,value=0,node=[3],dictionary=[2,2,node],freshNode=!0,r=0,dictSize=3,numBitsMask=4;if(uncompressed.length){streamBits(value=(r=uncompressed.charCodeAt(0))<256?0:1,numBitsMask),streamBits(r,value?65536:256),dictionary[1]=r;e:for(e=1;e<uncompressed.length;e++){for(r=uncompressed.charCodeAt(e),t=1;t<node.length;t+=2)if(node[t]==r){node=node[t+1];continue e}for(freshNode?freshNode=!1:streamBits(node[0],numBitsMask),t=1;dictionary[t]!=r&&t<dictionary.length;)t+=2;t==dictionary.length&&(++dictSize>=numBitsMask&&(numBitsMask<<=1),streamBits(value=r<256?0:1,numBitsMask),streamBits(r,value?65536:256),dictionary.push(r),dictionary.push([dictSize]),freshNode=!0),node.push(r),node.push([++dictSize]),dictSize>=numBitsMask&&(numBitsMask<<=1),node=dictionary[t+1]}for(freshNode?freshNode=!1:streamBits(node[0],numBitsMask),t=1;dictionary[t]!=r&&t<dictionary.length;)t+=2;t==dictionary.length&&(++dictSize>=numBitsMask&&(numBitsMask<<=1),streamBits(value=r<256?0:1,numBitsMask),streamBits(r,value?65536:256)),++dictSize>=numBitsMask&&(numBitsMask<<=1)}streamBits(2,numBitsMask),streamData.push(streamGetCharFromInt(streamDataVal<<=streamBitsPerChar-streamDataPosition))}return streamData}function o(length,resetBits,getNextValue){for(var e,dictionary=[0,1,2],enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],t="",bits=0,maxpower=2,power=0,data_val=getNextValue(0),data_position=resetBits,data_index=1;power!=maxpower;)bits+=(data_val>>--data_position&1)<<power++,0==data_position&&(data_position=resetBits,data_val=getNextValue(data_index++));if(2==bits)return"";for(maxpower=8*bits+8,bits=power=0;power!=maxpower;)bits+=(data_val>>--data_position&1)<<power++,0==data_position&&(data_position=resetBits,data_val=getNextValue(data_index++));for(e=fromCharCode(bits),dictionary[3]=e,t=e,result.push(e);data_index<=length;){for(maxpower=numBits,bits=power=0;power!=maxpower;)bits+=(data_val>>--data_position&1)<<power++,0==data_position&&(data_position=resetBits,data_val=getNextValue(data_index++));if(bits<2){for(maxpower=8+8*bits,bits=power=0;power!=maxpower;)bits+=(data_val>>--data_position&1)<<power++,0==data_position&&(data_position=resetBits,data_val=getNextValue(data_index++));dictionary[dictSize]=fromCharCode(bits),bits=dictSize++,0==--enlargeIn&&(enlargeIn=1<<numBits++)}else if(2==bits)return result.join("");if(bits>dictionary.length)return null;entry=bits<dictionary.length?dictionary[bits]:t+t.charAt(0),result.push(entry),dictionary[dictSize++]=t+entry.charAt(0),t=entry,0==--enlargeIn&&(enlargeIn=1<<numBits++)}return""}function compressToUTF16(input){if(null==input)return"";var compressed=s(input,15,getCharFromUTF16);return compressed.push(" "),compressed.join("")}r(9458);var util=r(6940);const syncApi=browser.storage.sync,kMAX="MAX_WRITE_OPERATIONS_PER_MINUTE",LZ_KEY={csslint:"editorCSSLintConfig",stylelint:"editorStylelintConfig",usercssTemplate:"usercssTemplate"},remove=run.bind(syncApi.remove),get=syncApi.get.bind(syncApi),set=run.bind(syncApi.set),toLZ=value=>compressToUTF16(JSON.stringify(value)),unLZ=val=>{return util.tryJSONparse(null==(compressed=val)?"":""==compressed?null:o(compressed.length,15,function(index){return compressed.charCodeAt(index)-32}));var compressed};let busy;async function run(...args){for(;;)try{if(!busy)return await(busy=this.apply(syncApi,args));await busy.catch(()=>0)}catch(e){if(!e.message.includes(kMAX))throw e;busy=util.sleep(6e4/(syncApi[kMAX]||120)*(2*Math.random()+1)),await 1}finally{busy=null}}t.LZ_KEY=LZ_KEY,t.get=get,t.getLZValue=async key=>unLZ((await get(key))[key]),t.remove=remove,t.set=set,t.setLZValue=(key,value)=>set({[key]:toLZ(value)})},9421:(e,t,r)=>{t.default=function(ver1,ver2){const[,main1=ver1||"",pre1]=VERSION_RE.exec(ver1),[,main2=ver2||"",pre2]=VERSION_RE.exec(ver2),delta=compareVersionChunk(main1,main2)||!pre1-!pre2||pre1&&compareVersionChunk(pre1,pre2,!0);return Math.sign(delta||0)};const VERSION_RE=/^(.*?)-([-.0-9a-z]+)|$/i,DIGITS_RE=/^\d+$/;function compareVersionChunk(ver1,ver2,isSemverMode){const parts1=ver1.split("."),parts2=ver2.split("."),len1=parts1.length,len2=parts2.length,len=(isSemverMode?Math.min:Math.max)(len1,len2);let delta;for(let e=0;!delta&&e<len;e+=1){const t=parts1[e],r=parts2[e];delta=isSemverMode?DIGITS_RE.test(t)&&DIGITS_RE.test(r)?t-r:t>r||t<r&&-1:(parseInt(t,10)||0)-(parseInt(r,10)||0)}return delta||isSemverMode&&len1-len2}},4930:(n,s,o)=>{s.apiSendProxy=apiSendProxy,s.updateTDM=function(value){TDM=value};const a=!1,apiHandler={get:({name:path},name)=>new Proxy(Object.defineProperty(()=>{},"name",{value:path?path+"."+name:name}),apiHandler),apply:apiSendProxy},API=e.API=new Proxy({path:""},apiHandler),isFrame=t!==top;let bgReadySignal,bgReadying=!1,TDM=isFrame?0:r.prerendering?-1:1;async function apiSendProxy({name:path},thisObj,args){const localErr=new Error,msg={data:{method:"invokeAPI",path,args},TDM};for(let res,err,retry=0;retry<2;retry++){try{if(res=await(a?browser:chrome).runtime.sendMessage(msg),res){if(bgReadying=bgReadySignal=null,err=res.error)throw err.stack+="\n"+localErr.stack,err;return res.data}}catch(e){if(!bgReadying)throw e.stack=localErr.stack,e}if(retry)throw new Error("Stylus could not connect to the background script.");await bgReadying}}s.API=API,s.FF=a,s.apiHandler=apiHandler,s.isFrame=isFrame,o.d(s,{TDM:()=>TDM,bgReadySignal:()=>bgReadySignal})},6990:(e,r,n)=>{n(9458);var s=n(4930),o=n(5619),a=n(8982),i=(n(6940),n(1480));const needsTab=["updateIconBadge","styleViaAPI"],swExec=o.createPortExec(()=>navigator.serviceWorker.controller,{lock:a.swPath}),workerApiPrefix="worker.";let workerProxy;async function invokeAPI({name:path},e,args){if(args[0]instanceof Event&&(args[0]="Event"),path.startsWith(workerApiPrefix))return workerProxy??=o.createPortProxy(a.workerPath),workerProxy[path.slice(7)](...args);let tab=!1;const frameId=t===top?0:1;if(!needsTab.includes(path)||!frameId&&(tab=await i.getOwnTab())){const msg={method:"invokeAPI",path,args},sender={url:location.href,tab,frameId};return swExec(msg,sender)}}s.apiHandler.apply=invokeAPI},3619:(e,t,r)=>{r(4930);const onMessage=new Map,onConnect={},onDisconnect={},wrapData=data=>({data}),wrapError=error=>({error:Object.assign({message:error.message||`${error}`,stack:error.stack},error)});function n(data,sender,multi){let result,res,e=0;multi&&(data=(multi=data)[0]);do{for(const[e,replyAllowed]of onMessage){try{res=e(data,sender,!!multi)}catch(e){res=Promise.reject(e)}replyAllowed&&res!==result&&void 0===result&&(result=res)}}while(multi&&(data=multi[++e]));return result}chrome.runtime.onMessage.addListener(function({data,multi,TDM},sender,sendResponse){0;if("invokeAPI"===data.method)return;sender.TDM=TDM;let res=!1;if(res=res?res.then(n.bind(null,data,sender,multi)):n(data,sender,multi),res instanceof Promise)return res.then(wrapData,wrapError).then(sendResponse),!0;void 0!==res&&sendResponse(wrapData(res))}),chrome.runtime.onConnect.addListener(async port=>{const name=port.name.split(":",1)[0],fnOn=onConnect[name],fnOff=onDisconnect[name];fnOn&&fnOn(port),fnOff&&port.onDisconnect.addListener(fnOff)}),t.onConnect=onConnect,t.onMessage=onMessage,r.d(t,{})},5619:(t,r,n)=>{r.createPortExec=createPortExec,r.createPortProxy=function(getTarget,opts){let exec;return new Proxy({},{get:(e,cmd)=>cmd===CLIENT?exec?.[CLIENT]:function(...args){return exec??=createPortExec(getTarget,opts,e[CLIENT]),exec.call(this,cmd,...args)}})};var s=n(6940);const CLIENT=Symbol("client"),COMMANDS={__proto__:null},PATH_OFFSCREEN="/offscreen.html",PATH=location.pathname,navLocks=navigator.locks,SharedWorker=e.SharedWorker,kWorker="_worker",NOP=()=>{};let timer,lastBusy=0;function createPortExec(getTarget,{lock,once}={},target){let queue,port,initPending,tracking,lastId=0;return exec;async function exec(...args){const ctx={args,stack:(new Error).stack},promise=new Promise((resolve,reject)=>ctx.rr=[resolve,reject]);return port||initPending||(initPending=initPort()),initPending&&(initPending=!exec[CLIENT]&&await initPending),(once?target:port).postMessage({args,id:++lastId},once||(Array.isArray(this)?this:void 0)),queue.set(lastId,ctx),ctx.p=promise.catch(NOP),promise}async function initPort(){exec[CLIENT]=null,"string"==typeof getTarget?(lock=getTarget,target=getWorkerPort(getTarget,console.error)):target||(target="function"==typeof getTarget?getTarget():getTarget).then&&(target=await target),port=target instanceof MessagePort?target:once?initChannelPort(target,null,once=[]):initChannelPort(target,{lock}),port.onmessage=onMessage,port.onmessageerror=onMessageError,queue=new Map,lastId=0,exec[CLIENT]=target,tracking||once||!navLocks||trackTarget(queue)}function onMessage({data}){const{id:e,res,err}=data.id?data:JSON.parse(data),{stack,rr:[resolve,reject]}=queue.get(e);queue.delete(e),lastId>1e9&&(lastId=0),err?reject(err[1]?Object.assign(...err,{stack:err[0].stack+"\n"+stack}):err[0]):resolve(res),once&&queue.size&&discard(queue,!0)}async function discard(myQ,wait){for(;wait&&myQ.size;)await Promise.all(Array.from(myQ.values(),ctx=>ctx.p));myQ===queue&&(wait&&port?.close(),exec[CLIENT]=queue=port=target=null)}async function trackTarget(myQ){for(tracking=!0;!(await navLocks.query()).held.some(e=>e.name===lock);)await s.sleep(10);await navLocks.request(lock,NOP),tracking=!1;for(const{stack,rr:[,reject]}of myQ.values()){const msg="Target disconnected",err=new Error(msg);err.stack=msg+"\n"+stack,reject(err)}myQ.clear(),queue===myQ&&discard(myQ)}}function getWorkerPort(url,onerror){let worker;if(SharedWorker)return worker=new SharedWorker(url,"Stylus"),onerror&&(worker.onerror=onerror),worker.port;let target=e;for(const view of chrome.extension.getViews()){if(worker=view[kWorker])break;view.location.pathname===PATH_OFFSCREEN&&(target=view)}return worker||(worker=target[kWorker]=new target.Worker(url),onerror&&(worker.onerror=onerror)),initChannelPort(worker,null)}function initChannelPort(target,msg,transfer){const e=new MessageChannel,port2=e.port2;return transfer?transfer[0]=port2:target.postMessage(msg,[port2]),e.port1}function onMessageError({data,source}){console.warn("Non-cloneable data",data),source.postMessage(JSON.stringify(data))}navLocks&&navLocks.request(PATH,()=>new Promise(NOP)),navigator.serviceWorker.onmessage=function(evt){const{id:once}=evt.data||{},exec=this,port=evt.ports[0];port.onerror=console.error,port.onmessage=onMessage,port.onmessageerror=onMessageError,once&&onMessage(evt);async function onMessage(portEvent){const data=portEvent.data,{args,id:e}=data.id?data:JSON.parse(data);let res,err;timer&&(timer=clearTimeout(timer));try{res=("function"==typeof exec?exec:exec[args.shift()]).apply(portEvent,args),res instanceof Promise&&(res=await res)}catch(e){res=void 0,e instanceof Error?(delete e.origin,err=[e,{...e}]):err=[e]}port.postMessage({id:e,res,err},portEvent._transfer),lastBusy=performance.now()}}.bind(COMMANDS),Object.assign(COMMANDS,{getWorkerPort(url){const e=getWorkerPort(url);return this._transfer=[e],e}}),n.d(r,{})},492:(t,r,n)=>{var s=n(4930),o=n(6940),a=n(1480);n(6990);let busy,ready,toUpload;const clientData=e.clientData,defaults={__proto__:null,disableAll:!1,exposeIframes:!1,exposeStyleName:!1,keepAlive:0,keepAliveIdle:!1,newStyleAsUsercss:!1,openEditInWindow:!1,"openEditInWindow.popup":!1,patchCsp:!1,"show-badge":!0,styleViaASS:!1,styleViaXhr:!1,urlInstaller:!0,windowPosition:{},compactWidth:850,"config.autosave":!0,"schemeSwitcher.enabled":"system","schemeSwitcher.nightStart":"18:00","schemeSwitcher.nightEnd":"06:00","popup.enabledFirst":!0,"popup.stylesFirst":!0,"popup.autoResort":!1,"popup.borders":!1,"popup.findSort":"w","manage.onlyEnabled":!1,"manage.onlyLocal":!1,"manage.onlyUsercss":!1,"manage.onlyEnabled.invert":!1,"manage.onlyLocal.invert":!1,"manage.onlyUsercss.invert":!1,"manage.actions.expanded":!1,"manage.backup.expanded":!0,"manage.filters.expanded":!0,"manage.links.expanded":!0,"manage.minColumnWidth":750,"manage.newUI":!0,"manage.newUI.favicons":!0,"manage.newUI.faviconsGray":!1,"manage.newUI.targets":3,"manage.newUI.sort":"title,asc","manage.searchMode":"meta","editor.options":{},"editor.toc.expanded":!0,"editor.options.expanded":!0,"editor.options.style.expanded":!0,"editor.lint.expanded":!0,"editor.publish.expanded":!0,"editor.lineWrapping":!0,"editor.smartIndent":!0,"editor.indentWithTabs":!1,"editor.tabSize":4,"editor.keyMap":"default","editor.theme":"default","editor.beautify":{selector_separator_newline:!0,newline_before_open_brace:!1,newline_after_open_brace:!0,newline_between_properties:!0,newline_before_close_brace:!0,newline_between_rules:!1,preserve_newlines:!0,end_with_newline:!1,indent_conditional:!0,indent_mozdoc:!0,space_around_combinator:!0,space_around_cmp:!1},"editor.beautify.hotkey":"","editor.lintDelay":300,"editor.linter":"csslint","editor.lintReportDelay":500,"editor.matchHighlight":"token","editor.autoCloseBrackets":!0,"editor.autocompleteOnTyping":!1,"editor.contextDelete":!1,"editor.selectByTokens":!0,"editor.arrowKeysTraverse":!0,"editor.appliesToLineWidget":!0,"editor.autosaveDraft":10,"editor.livePreview":!0,"editor.livePreview.delay":.2,"editor.targetsFirst":!0,"editor.colorpicker":!0,"editor.colorpicker.hexUppercase":!1,"editor.colorpicker.hotkey":"","editor.colorpicker.color":"","editor.colorpicker.maxHeight":300,"hotkey._execute_browser_action":"","hotkey.openManage":"","hotkey.styleDisableAll":"","sync.enabled":"none",iconset:-1,badgeDisabled:"#8B0000",badgeNormal:"#006666","headerWidth.edit":280,"headerWidth.install":280,"headerWidth.manage":280,"popup.search.globals":!1,popupWidth:246,popupWidthMax:280,updateInterval:24,updateOnlyEnabled:!1},warnUnknown=console.warn.bind(console,'Unknown preference "%s"'),values=o.deepCopy(defaults),onChange={},STORAGE_KEY="settings",defaultsClone=new Proxy({},{get:(e,key)=>o.deepCopy(defaults[key])}),knownKeys=Object.keys(defaults),set=(key,val,isSynced)=>{const old=values[key],type=typeof defaults[key];return type?(type!==typeof val&&(val="string"===type?`${val}`:"number"===type?+val||0:"boolean"===type?"true"===val||"false"!==val&&!!val:null),val===old||"object"===type&&o.deepEqual(val,old)?void 0:(values[key]=val,onChange[key]?.forEach(e=>e(key,val)),isSynced||((toUpload??=Promise.resolve().then(upload)&&{})[key]=val),!0)):warnUnknown(key)};function upload(){s.API.setPrefs(toUpload),toUpload=null}function setAll(data,fromStorage){if(busy=!1,fromStorage){for(const key in fromStorage)!(key in data)&&key in defaults&&set(key,defaults[key],!0);for(const key in data||(data={}))set(key,data[key],!0)}else Object.assign(values,data)}setAll(clientData.prefs),ready=Promise.resolve(),ready.then=e=>e(),a.onStorageChanged.addListener((changes,area)=>{if(busy)return;const data=(!area||"sync"===area)&&changes[STORAGE_KEY];data&&setAll(data.newValue,data.oldValue)}),r.STORAGE_KEY=STORAGE_KEY,r.__values=values,r.clientData=clientData,r.defaults=defaultsClone,r.knownKeys=knownKeys,r.reset=key=>{set(key,o.deepCopy(defaults[key]))},r.set=set,r.subscribe=(keys,e,runNow)=>{if(!e)return;let toRun;for(const key of Array.isArray(keys)?new Set(keys):[keys])key in defaults?((onChange[key]??=new Set).add(e),runNow&&(busy?(toRun??=[]).push(key):e(key,values[key],!0))):warnUnknown(key);return toRun?busy.then(()=>{for(const key of toRun)e(key,values[key],!0)}):void 0},r.unsubscribe=(keys,e)=>{for(const key of Array.isArray(keys)?keys:[keys]){const fns=onChange[key];fns&&(fns.delete(e),fns.size||delete onChange[key])}},n.d(r,{ready:()=>ready})},2013:(e,t,r)=>{t.styleCodeEmpty=function styleCodeEmpty(sec){const{code}=sec;let res=!code;if(res||null!=(res=sec._empty))return res;const len=code.length,e=STYLE_CODE_EMPTY_RE;e.lastIndex=0;let t=0;for(;e.exec(code)&&(t=e.lastIndex)!==len;);return Object.defineProperty(sec,"_empty",{value:res=t===len,configurable:!0}),styleCodeEmpty.lastIndex=t,res},t.styleJSONseemsValid=function(json){return json&&"string"==typeof json.name&&json.name.trim()&&Array.isArray(json.sections)&&"string"==typeof json.sections[0]?.code},t.styleSectionsEqual=function({sections:e},{sections:t}){return e&&t&&e.length===t.length&&e.every(sameSection,t)};const TO_CSS={domains:"domain",urlPrefixes:"url-prefix",urls:"url",regexps:"regexp"},STYLE_CODE_EMPTY_RE=/\s+|\/\*([^*]+|\*(?!\/))*(\*\/|$)|@namespace[^;]+;|@charset[^;]+;/iuy,rxEscape=/[\\"]/g;function sameSection(secA,e){const secB=this[e];if(equalOrEmpty(secA.code,secB.code,!0)){for(const target in TO_CSS)if(!equalOrEmpty(secA[target],secB[target],!1))return;return!0}}function equalOrEmpty(e,t,isStr){const typeA=isStr?"string"==typeof e:Array.isArray(e),typeB=isStr?"string"==typeof t:Array.isArray(t);return typeA&&typeB&&(isStr?e===t:e.length===t.length&&arrayEquals(e,t))||(null==e||typeA&&!e.length)&&(null==t||typeB&&!t.length)}function arrayEquals(e,t){return e.every(thisIncludes,t)&&t.every(thisIncludes,e)}function thisIncludes(e){return this.includes(e)}t.FROM_CSS={domain:"domains","url-prefix":"urlPrefixes",url:"urls",regexp:"regexps"},t.TO_CSS=TO_CSS,t.styleToCss=style=>{const res=[];for(const section of style.sections){let funcs,arr,cssName;for(const propName in TO_CSS)if(arr=section[propName]){cssName=TO_CSS[propName];for(const e of arr)res.push(funcs?", ":res.length?"\n\n@-moz-document ":"@-moz-document ",cssName,'("',e.replace(rxEscape,"\\$&"),'")'),funcs=!0}res.push(funcs?" {\n":"",section.code,funcs?"\n}":"")}return res.join("")},r.d(t,{})},5880:(e,t,r)=>{r(9458);const StorageExtras={async getValue(key){return(await this.get(key))[key]}},chromeLocal=Object.assign(browser.storage.local,StorageExtras);chrome;t.chromeLocal=chromeLocal,r.d(t,{})},4188:(e,t,r)=>{var n=r(6940);const connected="connected",disconnected="disconnected",getPhaseText=(phase,loaded,total)=>n.t(`optionsSyncStatus${n.capitalize(phase)}`,total&&[loaded+1,total],!1);t.DRIVE_NAMES={dropbox:"Dropbox",google:"Google Drive",onedrive:"OneDrive",webdav:"WebDAV"},t.connected=connected,t.disconnected=disconnected,t.getStatusText=(status,verbose)=>{if(status.syncing){const{phase,loaded,total}=status.progress||{};return phase?getPhaseText(phase,loaded,total)||`${phase} ${loaded} / ${total}`:n.t("optionsSyncStatusSyncing")}const{state,errorMessage}=status;return!errorMessage||state!==connected&&state!==disconnected?state!==connected||status.login?verbose&&getPhaseText(state)||state:n.t("optionsSyncStatusRelogin"):errorMessage},t.pending="pending",r.d(t,{})},8970:(e,t,r)=>{const uad=navigator.userAgentData,n=uad||navigator.userAgent,brands=uad?uad.brands.map(e=>`${e.brand}/${e.version}`).join(" "):n,platform=uad?uad.platform:n,chromeVer=+brands.match(/Chrom\w*\/(\d+)|$/)[1],CHROME=chromeVer,FIREFOX=chromeVer?NaN:+brands.match(/Firefox\w*\/(\d+)|$/)[1],OPERA=+brands.match(/(Opera|OPR)\w*\/(\d+)|$/)[1],MAC=/mac/i.test(platform),MOBILE=uad?uad.mobile:/Android/.test(n),WINDOWS=/Windows/.test(platform),VIVALDI=+brands.match(/Vivaldi\w*\/(\d+)|$/)[1];t.CHROME=CHROME,t.FIREFOX=FIREFOX,t.MAC=MAC,t.MOBILE=MOBILE,t.OPERA=OPERA,t.VIVALDI=VIVALDI,t.WINDOWS=WINDOWS},8982:(e,t,r)=>{r(8970);const ownRoot=chrome.runtime.getURL(""),actionPopupUrl=ownRoot+"popup.html",usoa="https://uso.kkx.one/",usoaRaw=["https://cdn.jsdelivr.net/gh/uso-archive/data@flomaster/data/","https://raw.githubusercontent.com/uso-archive/data/flomaster/data/","https://cdn.jsdelivr.net/gh/33kk/uso-archive@flomaster/data/","https://raw.githubusercontent.com/33kk/uso-archive/flomaster/data/"],usw="https://userstyles.world/",extractUsoaId=url=>url&&usoaRaw.some(e=>url.startsWith(e))&&+url.match(/\/(\d+)\.user\.css|$/)[1],extractUswId=url=>url&&url.startsWith(usw)&&+url.match(/\/(\d+)\.user\.css|$/)[1],regExpTest=RegExp.prototype.test,supported=regExpTest.bind(new RegExp(`^(?:(?:ht|f)tps?:|file:|${ownRoot})`)),isLocalhost=regExpTest.bind(/^file:|^https?:\/\/([^/]+@)?(localhost|127\.0\.0\.1)(:\d+)?\//);t.actionPopupUrl=actionPopupUrl,t.favicon=host=>`https://icons.duckduckgo.com/ip3/${host}.ico`,t.installUsercss="install-usercss.html",t.isLocalhost=isLocalhost,t.makeUpdateUrl=(url,e)=>"usoa"===url||!e&&(e=extractUsoaId(url))?`${usoaRaw[0]}usercss/${e}.user.css`:"usw"===url||!e&&(e=extractUswId(url))?`${usw}api/style/${e}.user.css`:"",t.ownRoot=ownRoot,t.supported=supported,t.swPath="/sw.js",t.uso="https://userstyles.org/",t.usoa=usoa,t.usoaRaw=usoaRaw,t.usw=usw,t.workerPath="/js/worker.js",r.d(t,{})},1480:(t,r,n)=>{r.closeCurrentTab=async function(){const tab=await getOwnTab();if(tab)return chrome.tabs.remove(tab.id)};n(9458),n(8970);var s=n(8982),o=n(6940);chrome;const a=chrome.runtime.getManifest(),MF_ICON=a.icons[16].replace(s.ownRoot,""),MF_ICON_PATH=MF_ICON.slice(0,MF_ICON.lastIndexOf("/")+1),MF_ICON_EXT=MF_ICON.slice(MF_ICON.lastIndexOf(".")),browserWindows=browser.windows,onStorageChanged=chrome.storage.sync.onChanged||chrome.storage.onChanged,getOwnTab=()=>browser.tabs.getCurrent();e._deepCopy=o.deepCopy,r.CHROME_POPUP_BORDER_BUG=false,r.MF=a,r.MF_ICON=MF_ICON,r.MF_ICON_EXT=MF_ICON_EXT,r.MF_ICON_PATH=MF_ICON_PATH,r.browserWindows=browserWindows,r.getActiveTab=async()=>(await browser.tabs.query({currentWindow:!0,active:!0}))[0]||browserWindows&&(await browser.tabs.query({windowId:(await browserWindows.getCurrent()).id,active:!0}))[0],r.getOwnTab=getOwnTab,r.ignoreChromeError=()=>chrome.runtime.lastError,r.onStorageChanged=onStorageChanged,n.d(r,{})},6940:(e,r,n)=>{r.deepCopy=deepCopy,r.deepEqual=function deepEqual(e,t,ignoredKeys){if(!e||!t||e===t)return e===t;const type=typeof e;if(type!==typeof t)return!1;if("object"!==type)return e===t;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((e,r)=>deepEqual(e,t[r],ignoredKeys));for(const key in e)if(!(!hasOwn(e,key)||ignoredKeys&&ignoredKeys.includes(key))){if(!hasOwn(t,key))return!1;if(!deepEqual(e[key],t[key],ignoredKeys))return!1}for(const key in t)if(!(!hasOwn(t,key)||ignoredKeys&&ignoredKeys.includes(key)||hasOwn(e,key)))return!1;return!0},r.deepMerge=deepMerge,r.fetchText=async function(url,opts){return(await fetch(url,opts)).text()},r.isEmptyObj=function(obj){if(obj)for(const e in obj)if(hasOwn(obj,e))return!1;return!0},r.mapObj=function(obj,e,keys){if(!obj)return obj;const res={};for(const t of keys||Object.keys(obj))keys&&!(t in obj)||(res[t]=e?e(obj[t],t,obj):obj[t]);return res},r.tryJSONparse=function(jsonString){try{if(jsonString)return JSON.parse(jsonString)}catch{}},r.tryRegExp=function(regexp,flags){try{return new RegExp(regexp,flags)}catch{}},r.tryURL=function(url){try{if(url)return new URL(url)}catch{}return""};const hasOwn=Object.call.bind({}.hasOwnProperty),stringAsRegExpStr=e=>e.replace(/[{}()[\]\\.+*?^$|]/g,"\\$&"),tCache=new Map,debounce=(()=>{const timers=new Map,clearTimer=data=>clearTimeout(data.timer),run=async(e,args)=>{timers.delete(e),e(...args)};return Object.assign((e,delay,...args)=>{let time;delay=+delay||0;let old=timers.get(e);if(old){if(delay&&old.time<(time=performance.now()+delay))clearTimer(old);else if(old.args.length===args.length&&old.args.every((e,t)=>e===args[t]))return}else timers.set(e,old={});old.args=args,old.time=delay&&(time??performance.now()+delay),old.timer=setTimeout(run,delay,e,args)},{timers,run,unregister:e=>{const data=timers.get(e);data&&(clearTimer(data),timers.delete(e))}})})();function deepMerge(src,dst,mergeArrays){if(!src||"object"!=typeof src)return src;if(Array.isArray(src))if(dst&&mergeArrays)for(const e of src)dst.push(deepMerge(e));else dst=Array.prototype.map.call(src,deepCopy);else{dst||(dst={});for(const[e,t]of Object.entries(src))dst[e]=deepMerge(t,dst[e])}return dst}function deepCopy(src){return deepMerge(src)}let sessionStore=new Proxy({},{get(target,name){try{const val=sessionStorage[name];return sessionStore=sessionStorage,val}catch{Object.defineProperty(t,"sessionStorage",{value:target})}},set(target,name,value){try{sessionStorage[name]=`${value}`,sessionStore=sessionStorage}catch{this.get(target),target[name]=`${value}`}return!0},deleteProperty:(target,name)=>delete target[name]});r.RX_META=/\/\*!?\s*==userstyle==[\s\S]*?==\/userstyle==\s*\*\//i,r.capitalize=e=>e.slice(0,1).toUpperCase()+e.slice(1),r.clamp=(value,min,max)=>value<min?min:value>max?max:value,r.clipString=(str,limit=100)=>str.length>limit?str.substr(0,limit)+"...":str,r.debounce=debounce,r.hasOwn=hasOwn,r.isCssDarkScheme=()=>matchMedia("(prefers-color-scheme:dark)").matches,r.makePropertyPopProxy=data=>new Proxy(data,{get:(obj,e,t)=>(t=obj[e],delete obj[e],t)}),r.sleep=e=>new Promise(e>0?t=>setTimeout(t,e):setTimeout),r.stringAsRegExp=(e,flags)=>new RegExp(stringAsRegExpStr(e),flags),r.stringAsRegExpStr=stringAsRegExpStr,r.t=(key,params,strict=!0)=>{const e=!params&&tCache.get(key)||chrome.i18n.getMessage(key,params);if(!e&&strict)throw`Missing string "${key}"`;return params||tCache.set(key,e),e},n.d(r,{sessionStore:()=>sessionStore})}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var module=i[e]={exports:{}};return a[e].call(module.exports,module,module.exports,c),module.exports}c.m=a,n=[],c.O=(result,e,t,priority)=>{if(!e){var r=1/0;for(i=0;i<n.length;i++){for(var[e,t,priority]=n[i],s=!0,o=0;o<e.length;o++)(!1&priority||r>=priority)&&Object.keys(c.O).every(key=>c.O[key](e[o]))?e.splice(o--,1):(s=!1,priority<r&&(r=priority));if(s){n.splice(i--,1);var a=t();void 0!==a&&(result=a)}}return result}priority=priority||0;for(var i=n.length;i>0&&n[i-1][2]>priority;i--)n[i]=n[i-1];n[i]=[e,t,priority]},c.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return c.d(getter,{a:getter}),getter},c.d=(exports,definition)=>{for(var key in definition)c.o(definition,key)&&!c.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce((t,key)=>(c.f[key](e,t),t),[])),c.u=e=>"edit_lazy-init_js"===e?"js/edit-lazy-init.js":"edit_global-search_js"===e?"js/edit-global-search.js":"edit_regexp-tester_js"===e?"js/edit-regexp-tester.js":"edit_linter_dialogs_js"===e?"js/edit-linter-dialogs.js":"js_dlg_config-dialog_js"===e?"js/config-dialog.js":"js_dlg_message-box_js"===e?"js/message-box.js":"vendor-overwrites_beautify_beautify-css-mod_js"===e?"js/beautify-mod.js":"edit_keymap-help_js"===e?"js/edit-keymap-help.js":"manage_lazy-init_js"===e?"js/manage-lazy-init.js":"popup_search_js"===e?"js/popup-search.js":"manage_injection-order_css"===e?"js/manage-injection-order.js":"node_modules_pnpm_usercss-meta_0_12_0_node_modules_usercss-meta_lib_parse-util_js"===e?"js/usercss-meta-lib-parse.js":"js/"+e+".js",c.miniCssF=e=>"edit_global-search_js"===e?"css/edit-global-search.css":"edit_regexp-tester_js"===e?"css/edit-regexp-tester.css":"js_dlg_config-dialog_js"===e?"css/config-dialog.css":"js_dlg_message-box_js"===e?"css/message-box.css":"popup_search_js"===e?"css/popup-search.css":"manage_injection-order_css"===e?"css/manage-injection-order.css":"js_color_color-picker_css"===e?"css/color-picker.css":"codemirror"===e?"css/codemirror.css":void 0,c.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),s={},o="Stylus:",c.l=(url,done,key,e)=>{if(s[url])s[url].push(done);else{var script,t;if(void 0!==key)for(var scripts=r.getElementsByTagName("script"),n=0;n<scripts.length;n++){var a=scripts[n];if(a.getAttribute("src")==url||a.getAttribute("data-webpack")==o+key){script=a;break}}script||(t=!0,(script=r.createElement("script")).charset="utf-8",script.timeout=120,c.nc&&script.setAttribute("nonce",c.nc),script.setAttribute("data-webpack",o+key),script.src=url),s[url]=[done];var i=(prev,event)=>{script.onerror=script.onload=null,clearTimeout(timeout);var e=s[url];if(delete s[url],script.parentNode&&script.parentNode.removeChild(script),e&&e.forEach(e=>e(event)),prev)return prev(event)},timeout=setTimeout(i.bind(null,void 0,{type:"timeout",target:script}),12e4);script.onerror=i.bind(null,script.onerror),script.onload=i.bind(null,script.onload),t&&r.head.appendChild(script)}},c.r=exports=>Object.defineProperties(exports,{[Symbol.toStringTag]:{value:"Module"},__esModule:{value:!0}}),c.p="/",(()=>{if(void 0!==r){var e=(e,t,n,resolve,reject)=>{var s=r.createElement("link");s.rel="stylesheet",s.type="text/css",c.nc&&(s.nonce=c.nc);return s.onerror=s.onload=event=>{if(s.onerror=s.onload=null,"load"===event.type)resolve();else{var r=event&&event.type,n=event&&event.target&&event.target.href||t,err=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+n+")");err.name="ChunkLoadError",err.code="CSS_CHUNK_LOAD_FAILED",err.type=r,err.request=n,s.parentNode&&s.parentNode.removeChild(s),reject(err)}},s.href=t,n?n.parentNode.insertBefore(s,n.nextSibling):r.head.appendChild(s),s},t=(href,e)=>{for(var t=r.getElementsByTagName("link"),n=0;n<t.length;n++){var s=(tag=t[n]).getAttribute("data-href")||tag.getAttribute("href");if("stylesheet"===tag.rel&&(s===href||s===e))return tag}var o=r.getElementsByTagName("style");for(n=0;n<o.length;n++){var tag;if((s=(tag=o[n]).getAttribute("data-href"))===href||s===e)return tag}},n=r=>new Promise((resolve,reject)=>{var href=c.miniCssF(r),n=c.p+href;if(t(href,n))return resolve();e(r,n,null,resolve,reject)}),s={common:0};c.f.miniCss=(e,t)=>{s[e]?t.push(s[e]):0!==s[e]&&{"edit_global-search_js":1,"edit_regexp-tester_js":1,"js_dlg_config-dialog_js":1,"js_dlg_message-box_js":1,popup_search_js:1,"manage_injection-order_css":1,codemirror:1,"js_color_color-picker_css":1}[e]&&t.push(s[e]=n(e).then(()=>{s[e]=0},t=>{throw delete s[e],t}))}}})(),(()=>{var e={common:0,"css_global-dark_css-css_global_css-css_spinner_css":0};c.f.j=(t,r)=>{var n=c.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else if(/^(css_global\-dark_css\-css_global_css\-css_spinn|js_color_color\-pick)er_css$/.test(t))e[t]=0;else{var promise=new Promise((resolve,reject)=>n=e[t]=[resolve,reject]);r.push(n[2]=promise);var url=c.p+c.u(t),error=new Error;c.l(url,event=>{if(c.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=event&&("load"===event.type?"missing":event.type),s=event&&event.target&&event.target.src;error.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",error.name="ChunkLoadError",error.type=r,error.request=s,n[1](error)}},"chunk-"+t,t)}},c.O.j=t=>0===e[t];var t=(t,data)=>{var r,n,[s,o,runtime]=data,a=0;if(s.some(t=>0!==e[t])){for(r in o)c.o(o,r)&&(c.m[r]=o[r]);if(runtime)var result=runtime(c)}for(t&&t(data);a<s.length;a++)c.o(e,n=s[a])&&e[n]&&e[n][0](),e[n]=0;return c.O(result)},r=self.webpackChunkStylus=self.webpackChunkStylus||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})()})()}